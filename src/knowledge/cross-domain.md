#  跨域与同源策略

1. 什么是跨域（同源策略）
  （1）ajax请求时，浏览器要求当前网页和server必须同源（安全）。
     如：一个小网站只能在自己的网站请求资源，不能去淘宝请求资源
     同源：http协议、域名（xxx.com）、端口(默认为80)，三者必须一致
  > 现实比喻：出身是否为一家人

* 举例：
    前端：http://a.com:8080/  协议：http，域名：a.com ，端口：8080
    server：https://b.com.api.xxx
    根据同源策略，上面两个网址非同源
    数据爬虫，不同源，可以发起攻击
  （2）非ajax请求：加载图片css js可无视同源策略
```
<img src=跨域图片的地址 / >    //可能图片会做防盗浏览限制，“此图片来自于...”
<img/> 图片可用于统计打点（如：按钮点击次数），可使用第三方统计服务（跨域统计）
<link href=跨域的css地址 / >  
<script src= 跨域的js地址></script>
```
> link和script可使用CDN，CDN一般都是外域，且<script>可实现jsonp（前端跨域策略）

2. 跨域

  （1）理解
     所有的跨域，都必须经过server端允许和配合。
    未经server端允许就能实现跨域，说明浏览器有漏洞，危险信号
> 比喻：所有的操作，都必须经过管理者（server服务器）同意，未经允许就能使用的地方不安全
  
  （2） 实现跨域的常见方式：jsonp和CORS
 服务器可以任意动态拼接数据返回，只要符合html格式要求。因此，可以在自己的html,插入其他<script>

* jsonp实现原理：
 ``` 
<script>可绕过跨域限制 => 服务器可以任意动态拼接数据返回 => <script>就可以获得跨域的数据，只要服务端愿意返回
即，使用<script>标签实现跨域
```